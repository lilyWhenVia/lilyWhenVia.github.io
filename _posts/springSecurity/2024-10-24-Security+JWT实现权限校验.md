---
layout:     post
title:      2024-10-24-Security+JWT实现SSO
subtitle:   2024-10-24-Security+JWT实现SSO
date:       2024-10-24 11:38
author:     lily
header-img: img/springSecurity.jpg
catalog:    true
tags:
    - springSecurity
---

参考文章：
1. [官方github地址文档](https://github.com/chaooo/spring-security-jwt)
2. 
# RSA+AES加密算法

在HTTPS中，**RSA+AES**的加密方案结合了**非对称加密**（RSA）和**对称加密**（AES）的优点，以确保通信的安全性和效率。下面是具体的过程和相关细节：

### 1. RSA和AES在HTTPS中的加密流程
HTTPS加密使用**RSA+AES**的混合加密模式，整个过程可以分为两个阶段：

#### (1) **握手阶段（使用RSA非对称加密）**：
- **服务器证书传输**：当客户端发起HTTPS连接请求时，服务器会返回一个包含RSA公钥的SSL/TLS证书。
- **客户端生成对称密钥（AES密钥）**：客户端生成一个随机的AES对称密钥（也称为会话密钥），这个密钥将用于后续数据的加密。
- **RSA加密会话密钥**：客户端使用服务器提供的RSA公钥将这个AES对称密钥加密，然后将加密后的密钥发送给服务器。
- **服务器使用RSA私钥解密AES密钥**：服务器使用自己的RSA私钥解密获得客户端生成的AES对称密钥。

#### (2) **数据传输阶段（使用AES对称加密）**：
- **双方使用AES进行对称加密**：一旦服务器解密并获得了AES密钥，客户端和服务器之间的通信就使用这个AES密钥进行对称加密。AES是一种对称加密算法，它的特点是加密和解密使用相同的密钥，且加密速度快，适合大数据量的传输。

### 2. 为什么使用RSA加密AES密钥？
这是为了利用**非对称加密的安全性**和**对称加密的效率**，其中RSA和AES在HTTPS加密中各自承担了不同的任务：

#### RSA加密的优势：
- RSA是**非对称加密算法**，其中公钥和私钥不同。服务器通过SSL证书公开RSA公钥，私钥则保存在服务器上，任何人都可以使用公钥加密信息，但只有服务器能使用私钥解密信息。
- RSA公钥加密是为了保护传输中的AES对称密钥不被窃听。因为非对称加密较慢，所以只用于加密少量数据（如AES会话密钥），而不会用于加密大量的应用数据。

#### 使用RSA加密AES密钥的原因：
- **安全性保障**：即使公钥在互联网上公开传输，RSA的安全性依赖于它的数学难题（如大数因数分解的难度）。虽然公钥是公开的，但攻击者无法仅凭公钥解密通过它加密的数据，因为解密需要私钥，而私钥只存储在服务器端。
- **避免中间人攻击**：通过公钥加密的AES会话密钥确保了中间人无法在传输过程中窃听到AES密钥，即使中间人获得了公钥也无济于事，因为只有服务器持有相应的私钥，能够解密AES密钥。

#### 公钥直接在互联网上传输是否安全？
- **公钥的传输是安全的**：因为即使攻击者在互联网上截获了公钥，也无法通过公钥反推出私钥。而且，公钥只能加密，不能解密，确保了攻击者无法通过公钥解密传输的数据。
- **公钥基础设施（PKI）**：HTTPS依赖于证书颁发机构（CA）签发的数字证书，确保公钥的真实性，防止攻击者伪造公钥。在握手阶段，客户端通过CA验证服务器的身份，确保公钥确实属于目标服务器。

### 3. 为什么不直接使用RSA进行数据加密？
- **性能问题**：RSA的加密速度远不及AES等对称加密算法，它更适合加密小块数据（如会话密钥），而AES加密则非常高效，适合处理大量数据。因此，RSA通常只用于加密会话密钥，而后续的数据传输则使用AES。
  
通过这种方式，HTTPS利用了RSA的安全性来保护AES密钥的传输，同时使用AES来高效加密大量数据，从而保证了网络通信的安全性和性能。

### 结论：
RSA非对称加密算法的主要作用是**安全传输对称加密的AES密钥**，而不是直接加密通信内容。因为RSA公钥即使通过互联网传输，仍然是安全的，攻击者不能仅凭公钥解密数据。通过这种混合加密方案，HTTPS既能保证数据传输的安全性，又能维持高效的加密性能。